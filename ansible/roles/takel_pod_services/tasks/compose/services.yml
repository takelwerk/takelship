---
- name: (compose) (services) deploy project file
  ansible.builtin.template:
    src: >-
      ../../{{ takel_pod_services_service.role }}/templates/{{
      takel_pod_services_service.template }}
    dest: >-
      {{ takel_pod_services_home_dir }}/{{
      takel_pod_services_dist_dir }}/{{
      takel_pod_services_compose_dir }}/{{
      takel_pod_services_service.name }}/{{
      takel_pod_services_service_filename }}.{{
      takel_pod_services_service_fileext }}
    owner: "{{ takel_pod_services_user.owner }}"
    group: "{{ takel_pod_services_user.group }}"
    mode: '0644'
  vars:
    takel_pod_services_include: ''
  loop: "{{ takel_pod_services_services }}"
  loop_control:
    loop_var: takel_pod_services_service

- name: (compose) (services) deploy service include file
  ansible.builtin.template:
    src: >-
      ../../{{ takel_pod_services_service.role }}/templates/{{
      takel_pod_services_service.template }}
    dest: >-
      {{ takel_pod_services_home_dir }}/{{
      takel_pod_services_dist_dir }}/{{
      takel_pod_services_compose_dir }}/{{
      takel_pod_services_service.name }}/{{
      takel_pod_services_service_include_filename }}.{{
      takel_pod_services_service_fileext }}
    owner: "{{ takel_pod_services_user.owner }}"
    group: "{{ takel_pod_services_user.group }}"
    mode: '0644'
  vars:
    takel_pod_services_include: "{{ takel_pod_services_service.name }}/"
  loop: "{{ takel_pod_services_services }}"
  loop_control:
    loop_var: takel_pod_services_service
