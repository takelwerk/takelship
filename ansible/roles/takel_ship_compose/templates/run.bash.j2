{{ takel_ship_scripts_shebang }}

# podman compose is a thin wrapper around an external compose provider
# the default compose providers are docker-compose and podman-compose
# if installed, docker-compose takes precedence

# echo starting local registry
${TAKELSHIP_PODMAN_COMPOSE:-podman compose} --file {{ takel_ship_compose_home_dir }}/{{ takel_ship_compose_data_dir }}/{{ takel_ship_compose_compose_dir }}/registry/{{ takel_ship_compose_service_filename }}.{{ takel_ship_compose_service_fileext }} up --detach
# copying images to local registry
${TAKELSHIP_COMPOSE_DIR:-{{ takel_ship_compose_home_dir }}/{{ takel_ship_compose_data_dir }}/{{ takel_ship_compose_compose_dir }}}/registry/mirror
# starting {{ takel_ship_compose_project.name }}
${TAKELSHIP_PODMAN_COMPOSE:-podman compose} --file {{ takel_ship_compose_home_dir }}/{{ takel_ship_compose_data_dir }}/{{ takel_ship_compose_compose_dir }}/{{ takel_ship_compose_service_filename }}-{{ takel_ship_compose_project.name }}.{{ takel_ship_compose_service_fileext }} up
